# Сайт мини-игр для 5Chairs Bot

Веб-приложение для проведения мини-игр во время встреч, интегрированное с Telegram ботом 5Chairs.

## Функциональность

### Главный экран
- Список доступных мини-игр с оранжевыми кнопками
- Фон с текстурой бумаги
- Игры: Викторина, Крокодил, Мафия, Алиас, Данетки

### Экран игры (лоби)
- **Счетчик участников**: Оранжевый круг показывает X/Y (присоединившиеся/всего участников)
- **Кнопка "Присоединиться"**: Добавляет пользователя в игру
- **Ограничение**: Пользователь может быть только в одной игре одновременно
- **Досрочный старт**:
  - Появляется когда достигнут минимальный порог игроков
  - Требует согласия всех присоединившихся
  - Игра стартует когда все нажали "Стартовать досрочно"
- **Автоматический запуск**: Когда X = Y (все участники присоединились)
- **Таймер неактивности**: Сброс игры через 10 минут бездействия

### Технические детали

**База данных (Supabase PostgreSQL)**:
- `meetings` - встречи с общим количеством участников
- `games` - список доступных мини-игр с порогами
- `game_sessions` - сессии игр со статусами
- `participants` - участники встречи
- `game_participants` - связь участников с игровыми сессиями

**Обновления в реальном времени**:
- Опрос сервера каждые 3 секунды
- Автоматическое обновление счетчиков и статусов

**Логика старта игры**:
1. Досрочный старт: все присоединившиеся нажали "Стартовать досрочно" и достигнут минимум игроков
2. Автоматический старт: все участники встречи (X = Y) присоединились

## Интеграция с Telegram Bot

Для интеграции с ботом 5Chairs необходимо:

1. При запуске WebApp передавать:
   - ID встречи
   - Telegram User ID
   - Общее количество участников встречи

2. Использовать Telegram WebApp API для:
   - Получения данных пользователя
   - Отправки событий боту (присоединение, старт игры)

3. API endpoints для бота:
   - `GET /game-status` - получить статус игры
   - `POST /join-game` - присоединиться к игре
   - `POST /early-start-vote` - голосовать за досрочный старт
   - `POST /leave-game` - покинуть игру

## Разработка

```bash
# Установка зависимостей
npm install

# Запуск dev сервера
npm run dev

# Сборка
npm run build
```

## Переменные окружения

```
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```
